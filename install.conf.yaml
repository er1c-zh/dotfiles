- defaults:
    link:
        relink: true
    shell:
        stdout: true
        stderr: true

- decrypt:
    -
        src_path: './encrypt'
        dst_path: './decrypt'

- encrypt:
    -
        src_path: './decrypt'
        dst_path: './encrypt'

- shell:
    - ['git submodule update --init --recursive', 'Install submodules.']

- create:
    - ~/bin
    - ~/tmp
    - ~/opt
    - ~/custom/

- link:
    ~/.vim: vim
    ~/.vimrc: vim/vimrc
    ~/.vimrc.bundles: vim/vimrc.bundles
    ~/.ctags: vim/ctags
    ~/.zshrc: zshrc
    ~/.gitconfig: gitconfig
    ~/.iterm2: iterm2

- shell:
    - ['mkdir -p $HOME/custom/path.rc', 'Create $HOME/custom/path.rc']
    - ['[[ -d ~/.oh-my-zsh ]] || sh -c "$(curl -fsSL https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"', Install oh-my-zsh.]
    - [./homebrew.sh, Install homebrew.]
    - [./brew_v2ray.sh, Install v2ray.]
    - [./homebrew_pkg.sh, Install homebrew package.]
    - [./homebrew_cask.sh, Install homebrew cask.]
    - ['[[ -d ~/.vim/bundle/Vundle.vim ]] || git clone https://github.com/VundleVim/Vundle.vim.git ~/.vim/bundle/Vundle.vim', Clone Vundle.]
    - [ vim +PluginInstall +qall, "Install vim plugins."]

- link:
    ~/Library/Rime/: 
        glob: true
        path: rime/*.custom.yaml

- shell:
    - ['/Library/Input\ Methods/Squirrel.app/Contents/MacOS/Squirrel --reload', Reload Squirrel config.]

